{% extends "shop/base.html" %}
{% load static %}

{% block title %}
 {% if category %}{{ category.name }}{% else %}Главная{% endif %}
{% endblock %}
{% block content %}

 <h2>Каталог</h2>
     

 <div id="sidebar">
 
 <ul>

 <li {% if not category %}class="selected "{% endif %}>
 <a class='nav' href="{% url "shop:product_list" %}">Все</a>
 </li>

 
 {% for c in categories %}
 <li {% if category.slug == c.slug %}class="selected "
 {% endif %}>
 
 <a class='nav' href="{{ c.get_absolute_url }}">{{ c.name }}</a>
 </li>
 
 {% endfor %}
 



 </ul>
 </div>

 <div id="main" class="product-list ">
 <h2 class='all'>{% if category %}{{ category.name }}{% else %}Все товары


  {% endif %}</h2>  

 {% for product in page_obj %}
 

 <div class="item">
    <a  href="{{ product.get_absolute_url }}">
    <img src="{% if product.image %}{{ product.image.url }}{% else %}{% static
    "img/no_image.png" %}{% endif %}">
    </a>
    
    <a class='text-truncate cart-text' href="{{ product.get_absolute_url }}"><b>{{ product.name }}</b></a>
    <p class='text-truncate cart-text'>
        {{ product.description }}
        
    </p>
    <hr>
    
        {{ product.price }}сом


 </div>


 {% endfor %}
 

 </div>
 <nav>
    <ul class="pagination">
        <!-- Кнопка "назад" всегда видима, но неактивна на первой странице -->
        <li class="page-item {% if not page_obj.has_previous %}disabled{% endif %}">
            <a class="page-link link" href="{% if page_obj.has_previous %}?page={{ page_obj.previous_page_number }}{% else %}#{% endif %}">«</a>
        </li>

        <!-- Номера страниц -->
        {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num %}
                <li class="page-item active"><span class="active">{{ num }}</span></li>
            {% else %}
                <li class="page-item"><a class="page-link" href="?page={{ num }}">{{ num }}</a></li>
            {% endif %}
        {% endfor %}

        <!-- Кнопка "вперед" -->
        <li class="page-item {% if not page_obj.has_next %}disabled{% endif %}">
            <a class="page-link link" href="{% if page_obj.has_next %}?page={{ page_obj.next_page_number }}{% else %}#{% endif %}">»</a>
        </li>
    </ul>
 
{% endblock %}
